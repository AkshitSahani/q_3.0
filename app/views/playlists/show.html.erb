<div id="d_player"></div>
<div id="dz-root"></div>
<script src="http://e-cdn-files.deezer.com/js/min/dz.js"></script>
<script>
  window.dzAsyncInit = function() {
  DZ.init({
    appId  : '226822',
    channelUrl : 'http://localhost:3000/playlist/player',
    player : {
      container: 'd_player',
      width : 800,
      height : 300,
      onload : function(){}
    }
  })
  };
  setTimeout(function(){DZ.player.playTracks([<%= @playlist_q_songs.first.song_id %>])}, 3000);
  setTimeout(function(){DZ.Event.subscribe('track_end', function(evt_name){
    console.log("Track has ended");
    DZ.player.playTracks([<%= @playlist_q_songs.second.song_id %>])},3000);
  });


  (function() {
  var e = document.createElement('script');
  e.src = 'http://e-cdn-files.deezer.com/js/min/dz.js';
  e.async = true;
  document.getElementById('dz-root').appendChild(e);
  }());
</script>

<% @playlist_q_songs.each do |song| %>
<%= song.name %>
  <button type="button" name="button" class="vote">   Vote</button> </br>
<% end %>
